Command line interface
======================
.. currentmodule:: frads

Frads provide several high-level command-line tools for existing and new users who are familiar with command line interface to expedite standard workflow and minimize user error. The command-line tools also serve as examples of how to integrate the frads library with other software packages or graphic user interfaces.

mrad
----
An user can complete an entire matrix-based simulation using the mrad program, which takes a configuration file as input detailing the model setup, including the material and geometry data as Radiance primitives and model-specific information such as which geometry corresponds to windows and walls.

An example configuration file can be automatically generated by using the command from the project root directory.

.. code:: bash

   mrad init

An run.cfg file will be automatically generated using the Radiance model files present in the default directory structure, which includes an Objects directory for all model objects (e.g. floor, walls, ceiling) with an .rad extension and material definition with an .mat file extension.  The init command will continue to make Matrices, Resources, and Results directory to store the generated matrices, weather, and results from the simulation. The init command also provides a series of default simulation parameters for the various matrix generation procedures. A typical configuration file consists of five sections: simulation control, file structure, site, model, and ray senders. An excerpt of the automatically generate configuration look like this::

   vmx_basis = kf
   vmx_opt = -ab 5 -ad 65536 -lw 1e-8
   fmx_basis = kf
   smx_basis = r4
   dmx_opt = -ab 2 -ad 128 -c 2000
   dsmx_opt = -ab 2 -ad 64 -lw 1e-4
   cdsmx_opt = -ab 0
   ray_count = 1
   pixel_jitter = 0.7
   separate_direct = False
   nprocess = 1
   overwrite = False

File structure section of the configuration need not to be changed unless the user elect to having a different one. The structure is default to::

   base = /PATH/TO/YOUR/PROJECT
   matrices = Matrices
   results = Results
   objects = Objects
   resources = Resources

Site information relates to building location and orientation. An user has to specify one of the three parameters to define the location: the weather file name, latitude and longitude, and zip code (U.S only). The orientation parameter is used to rotate the sky model while the building remains static, with zero degree representing a south facing facade and 90 representing a west facing facade. A excerpt of the site configuration::

   wea_path
   latitude = 37
   longitude = 122
   zipcode
   orientation = 0

The model section describes the model components: geometry and material definitions. If no windows are defined, mrad will initiate the two-phase (daylighting coefficient) method. If windows with different orientation or having different exterior shading, they should be grouped by individual files.::

   material = materials.mat
   windows
   scene = ground.rad floor.rad ceiling.rad lower_glass.rad walls.rad upper_glass.rad
   ncp_shade
   bsdf
   sunbsdf

Ray sender represents the objects used to spawn rays: grid points and view (image rendering). A user has to define at least one ray sender for mrad to carry out the simulation. For grid based illuminance/irradiance simulation (e.g. workplane illuminance), the grid surface, usually floor,::

   view1
   grid_surface = floor.rad
   grid_height = 0.76
   grid_spacing = .6

When ready to carry out the simulation, run::

   mrad run

If a configuration file has been prepared beforehand, for example as test.cfg, simple append the files name as such::

   mrad run test.cfg

to avoid running the init command.


genmtx
------
   genmtx

.. _ep2rad:


.. _eprad:

eprad
-----
   eprad

ep2rad
------
   ep2rad
